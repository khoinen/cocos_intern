{"version":3,"sources":["assets/Introduce/Introduce.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import EffectManager from \"../Scripts/EffectManager\";\nconst {ccclass, property} = cc._decorator;\nconst storyText = [[\"STICKMAN\", \"INVOLVED\", \"IN\", \"A\", \"BANK\", \"ROBBERY\", \"HE\", \"WAS\", \"ARRESTED\", \"IN\", \"A\", \"SECRET\", \"PRISON\", \"IN\", \"AMERICA\"],\n                    [\"AFTER\", \"ESCAPING\", \"FROM\", \"THE\", \"PRISON,\", \"THE\", \"STICKMAN\", \"LIVED\", \"A\", \"LIFE\", \"OF\", \"LUXURY.\", \"\\nBUT\", \"THERE\", \"WAS\", \"AN\", \"ENEMY\", \"WHO\", \"WAS\", \"LIVING\", \"IN\", \"A\", \"PRISON\", \"UNDER\", \"THE\", \"SEA.\", \"\\nPUNISHING\", \"HIM\", \"WAS\", \"THE\", \"NEXT\", \"OBJECTIVE.\"],\n                    [\"AFTER\", \"ESCAPING\", \"TO\", \"THE\", \"ISLAND,\", \"THE\", \"STICKMAN\", \"STOLE\", \"A\", \"JEWEL\", \"FROM\", \"AN\", \"ABORIGINAL\", \"TRIBE.\", \"HE\", \"WAS\", \"ONCE\", \"AGAIN\", \"ARRESTED\"]];\n\nconst tween = cc.tween;\n\nvar introIndex = 0;\n@ccclass\nexport default class Introduce extends cc.Component {\n\n    @property([cc.Sprite])\n    prisonScene: cc.Sprite[] = [];\n\n    @property(cc.Node)\n    next: cc.Node = null;\n\n    @property(cc.Node)\n    story: cc.Node = null;\n\n    @property(cc.Label)\n    storyLabel:cc.Label = null;\n\n    @property([cc.SpriteFrame])\n    left: cc.SpriteFrame[] =[];\n\n    @property([cc.SpriteFrame])\n    right: cc.SpriteFrame[] =[];\n\n    private countWord = 0;\n    // private introIndex = 0;\n    onLoad(): void {\n        this.resetIntroduce();\n    }\n\n    onEnable(): void {\n        this.runAnimation();\n    }\n\n    onDisable(): void {\n        this.resetIntroduce();\n    }\n\n    resetIntroduce(): void {\n        this.prisonScene[0].node.position = cc.v3(-450, 1200);\n        this.prisonScene[1].node.position = cc.v3(1200, 133);\n        this.next.opacity = 0;\n        this.next.scale = 0;\n        this.story.opacity = 0;\n        this.storyLabel.string = \"\"\n    }\n    runAnimation(): void {\n        tween(this.node).call(() => {\n            tween(this.prisonScene[0].node).to(0.3, {position: cc.v3(0, 385)}).start();\n        })\n        .delay(0.3)\n        .call(() => {\n            tween(this.prisonScene[1].node).to(0.3, {position: cc.v3(0, 220)}).start();\n        })\n        .delay(0.5)\n        .call(() => {\n            this.story.active = true;\n            this.story.scale = 0;\n            this.story.opacity = 0;\n            tween(this.story)\n                .to(0.3, {scaleX: 1.2, scaleY: 1.5, opacity: 255}, {easing: \"quadIn\"})\n                .call(()=>{\n                    this.schedule(()=>{\n                        switch (introIndex) {\n                            case 0:\n                                this.storyLabel.fontSize = 30;\n                                this.storyLabel.lineHeight = 30;\n                                break;\n                            case 1:\n                                this.storyLabel.fontSize = 22;\n                                this.storyLabel.lineHeight = 22;\n                                break;\n                            case 2:\n                                this.storyLabel.fontSize = 28;\n                                this.storyLabel.lineHeight = 28;\n                                break;\n                        }\n                        if (this.countWord < storyText[introIndex].length){\n                            this.storyLabel.string += storyText[introIndex][this.countWord] + \" \"\n                        }else{\n                            cc.log(\"story\", \"end\")\n                            EffectManager.showButton(this.next, 0.3);\n                        }\n                        this.countWord++\n                    },0.1,storyText[introIndex].length)\n                })\n                .start();\n            \n        })\n        .start();\n        // tween(this.prisonScene[0]).to(0.3, {position: cc.v3(0, 385)}).start();\n        // tween(this.prisonScene[1]).delay(0.8).to(0.3, {position: cc.v3(0, 133)}).start();\n    }\n\n    startGame(): void {\n        this.node.active = false;\n        cc.find(\"Canvas/GameManager\").getComponent(\"GameManager\").startGame();\n    }\n\n    setIntro(level: number): void {\n        let length = this.left.length;\n        introIndex = Math.floor(level / 10)\n        this.countWord = 0\n        for (let i = 0; i < length; ++i)\n        {\n            if (introIndex == i) {\n                this.prisonScene[0].spriteFrame = this.left[i];\n                this.prisonScene[1].spriteFrame = this.right[i];\n                return;\n            }\n        }\n    }\n}\n"]}