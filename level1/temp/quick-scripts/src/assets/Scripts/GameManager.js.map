{"version":3,"sources":["assets/Scripts/GameManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import Data from \"./Data\";\nimport EffectManager from \"./EffectManager\";\nimport FBInstantManager from \"./FBInstantManager\";\nimport BundleManager from \"./BundleManager\";\n\nconst {ccclass, property} = cc._decorator;\nconst tween = cc.tween;\n\nconst TOTAL_LEVEL = 19;\n\nconst VERSION = '1.3.0'\n\nexport enum SOUND {\n    BG,\n    CLICK,\n    FAIL_STAGE,\n    SUCCESS_STAGE,\n    SUCCESS_LEVEL,\n}\n\n//Bật tắt Introduce\nlet SHOW_INTRO = true;\n\nconst lazyGetDataAsync = [];\n\n\n@ccclass\nexport default class GameManager extends cc.Component {\n\n    @property(cc.Prefab)\n    levels: cc.Prefab[] = [];\n\n    @property(cc.Node)\n    shadow: cc.Node = null;\n\n    @property([cc.AudioClip])\n    sounds: cc.AudioClip[] = [];\n\n    @property(cc.Node)\n    success: cc.Node = null;\n\n    @property(cc.Node)\n    fail: cc.Node = null;\n\n    @property(cc.Node)\n    ui: cc.Node = null;\n\n    @property(cc.Node)\n    shadowUI: cc.Node = null;\n\n    @property(cc.Node)\n    gameContainer: cc.Node = null;\n\n    @property(cc.Node)\n    optionContainer: cc.Node = null;\n\n    @property(cc.Prefab)\n    introducePrefab: cc.Prefab = null;\n\n    @property(cc.Node)\n    home: cc.Node = null;\n\n    @property(cc.Prefab)\n    listLevelPrefab: cc.Prefab = null;\n\n    @property(cc.Node)\n    level: cc.Node = null;\n\n    @property(cc.Node)\n    mainCamera: cc.Node = null;\n\n    @property(cc.Prefab)\n    setting: cc.Prefab = null;\n\n    @property(cc.Node)\n    noInternet: cc.Node = null;\n    \n    @property(cc.Prefab)\n    introduce: cc.Prefab = null;\n\n    @property(cc.Prefab)\n    loading: cc.Prefab = null;\n\n    @property(cc.Node)\n    btnSetting: cc.Node = null;\n\n    @property(cc.Prefab)\n    guide: cc.Prefab = null;\n\n    @property(cc.Prefab)\n    comingSoon2: cc.Prefab = null;\n\n    _home = null;\n    _introduce: cc.Node = null;\n    _listLevel: cc.Node =null;\n    _loading: cc.Node = null;\n\n    _ui = null;\n    _countDown = null;\n    _levelCurrent = {\n        script: null,\n        level: 0\n    };\n\n    _levelArray = [];\n    _currentScene = null;\n    _beginScene = null;\n    _data = null;\n    _txtMoney = null;\n    currentAudioBG = null;\n    _clickX4 = true;\n    _selectedLevel = 0;\n    _failLevelLoad = null;\n    _bundleInstance = null;\n    _temp: number = 0;\n    firstPlay = true;\n\n    //GameManager để quản lý việc tạo và chuyển các level\n    onLoad(): void {\n        this._bundleInstance = BundleManager.getInstance();\n        console.log('APP VERSION: ', VERSION)\n        this.ui.active = true;\n        this._ui = this.ui.getComponent(\"UIController\");\n        this.shadowUI.opacity = 0;\n        this.showHome();\n        this.showShop(false);\n        this._txtMoney = this._ui.moneyTop.getChildByName(\"txt_money\").getComponent(cc.Label);\n        this._countDown = this._ui.countDown.getComponent(\"CountDown5s\");\n        Data.getData(Data.FACEBOOK_KEY, (err, data) => {\n            this._data = data;\n            if (this._data.unlockedLevel > 0) {\n                this.firstPlay = false;\n            }\n            this._txtMoney.string = this._data.money;\n            this._temp = this._data.unlockedLevel;\n            if (this._data.unlockedLevel < TOTAL_LEVEL) {\n                let path = \"Level\" + (this._data.unlockedLevel + 1);\n                this._bundleInstance.getPrefabByName(path);\n            }\n\n            lazyGetDataAsync.forEach((lazyFunc) => {\n                lazyFunc(this._data)\n            })\n        })\n    }\n\n    onEnable(): void {\n        this._home = this.home.getComponent(\"HomeController\");\n        if (this._home)\n            this._home.updateCalendar();\n        this._introduce = cc.find(\"Canvas/Introduce\");\n        this.optionContainer.zIndex = cc.macro.MAX_ZINDEX - 100;\n        this.home.zIndex = cc.macro.MAX_ZINDEX - 99;\n        this.getDataAsync((data) => {\n            this._levelCurrent.level = data.unlockedLevel;\n            this._selectedLevel = data.unlockedLevel;\n            if ((this._data.unlockedLevel == 0) && this.firstPlay) {\n                this._ui.showGuide(true);\n                this.firstPlay = false;\n            }\n        })\n    }\n    start(): void {\n        this.playAudioBG();\n        this._loading = cc.instantiate(this.loading);\n        this.showLoading(false)\n        this._loading.zIndex = cc.macro.MAX_ZINDEX;\n        cc.find(\"Canvas\").addChild(this._loading);\n    }\n\n    getDataAsync(cb) {\n        if (this._data) return cb(this._data)\n        lazyGetDataAsync.push(cb)\n    }\n\n    playAudioBG(): void {\n        this.playSound(SOUND.BG, true);\n    }\n    \n    stopAudioBG(): void {\n        cc.audioEngine.stopMusic();\n    }\n\n    showHome(): void {\n        if (this.home)\n        {\n            this.home.active = true;\n        }\n    }\n\n    showLoading(show: boolean): void {\n        this._loading.active = show;\n    }\n\n    showIntroduce(): void {\n        if (this._introduce)\n        {\n            this.showLoading(false);\n            this._introduce.active = true;\n            this._introduce.zIndex = cc.macro.MAX_ZINDEX;\n            this._ui.showUIIntroduce(false);\n            \n        }\n    }\n\n    showListLevel(): void {\n        this.playSound(SOUND.CLICK, false);\n        if (this._listLevel)\n        {\n            this._listLevel.active = true;\n        }\n        else\n        {\n            this._listLevel = cc.instantiate(this.listLevelPrefab);\n            this._listLevel.zIndex = cc.macro.MAX_ZINDEX - 1;\n            cc.find(\"Canvas\").addChild(this._listLevel);\n        }\n        this._ui.showGuide(false);\n    }\n\n    nextIntroduce(): void {\n        this.home.active = false;\n        this._ui.showUIIntroduce(false);\n        //Từ level 2 trở đi khi bấm vào game sẽ không xuất hiện phần Lupin bị bắt nữa\n        // 0 là index tương đương level 1\n        if (this._temp != 0)\n            this._selectedLevel = this._temp;\n        if (this._selectedLevel % 10 != 0)\n        {\n            this.startGame();\n            return;\n        }\n        if (!SHOW_INTRO) {\n            this.startGame();\n            return;\n        }\n        if (this._introduce) {\n            this._introduce.getComponent(\"Introduce\").setIntro(this._selectedLevel);\n            this._ui.showUIEndGame(false);\n            this.showIntroduce();\n        }\n    }\n\n    onReplay(): void {\n        this.playSound(SOUND.CLICK, false);\n        this._currentScene.active = false;\n        this._beginScene.active = true;\n    }\n\n    onHome(): void {\n        this.playSound(SOUND.CLICK, false);\n        cc.Tween.stopAll();\n        this.mainCamera.active = true;\n        this.home.active = true;\n        this.gameContainer.children.forEach(children => {\n            children.active = false;\n        });\n        this._ui.showUIEndGame(false);\n        this._ui.showUIIntroduce(true);\n        this._ui.showUIContinue(false);\n    }\n\n    onNextLevel(): void {\n        this.playSound(SOUND.CLICK, false);\n\n        if (this._levelCurrent.level >= TOTAL_LEVEL) {\n            this.btnSetting.active = false;\n            this._ui.showUIEndGame(false)\n            this._ui.showComingSoon();\n            return\n        }\n\n        this.showLoading(true);\n\n        this._temp = this._levelCurrent.level;\n        let name = \"Level\" + (this._temp + 1);\n        if (this._temp % 10 == 0) {\n            this.nextIntroduce();\n            return;\n        }\n        this._bundleInstance.getPrefabByName(name, (err, prefab) => {\n            this.showLoading(false);\n            if (prefab) {\n                this._currentScene.active = false;\n                if (this._currentScene.parent != this.gameContainer) {\n                    this._currentScene.parent.active = false;\n                }\n                this.gameContainer.addChild(cc.instantiate(prefab));\n                this._ui.showUIEndGame(false);\n                let current = this._temp + 1;\n                let next = this._temp + 2;\n                cc.error(\"Current \" + current);\n                cc.error(\"Next \" + next);\n                this.setLevel(current, next);\n                GameManager.logNextLevel(current);\n                return;\n            }\n            console.error(err);\n        })\n    }\n\n    static logEvent(eventName: string) {\n    }\n    static logFailed(level: number, stage: number, option: number) {\n    }\n    static logPassed(level: number, stage: number, option: number) {\n    }\n    static logLevel(level: number) {\n\n    }\n    static logNextLevel(level: number) {\n    }\n\n    initGame(level: number): void {\n        GameManager.logLevel(level)\n        for (let i = 0; i < this.gameContainer.children.length; ++i)\n        {\n            let node = this.gameContainer.children[i];\n            if (node.name == (\"Level\" + (level + 1)))\n            {\n                node.active = true;\n                if (node.children[0].name.includes(\"Level\"))\n                {\n                    for (let children of node.children)\n                    {\n                        children.active = false;\n                    }\n                    node.children[0].active = true;\n                }\n                return;\n            }\n        }\n        this.showLoading(true);\n        let name = \"Level\" + (level + 1);\n        this._bundleInstance.getPrefabByName(name, (err, prefab) => {\n            this.showLoading(false);\n            if (prefab) {\n                let node = cc.instantiate(prefab);\n                this.gameContainer.addChild(node);\n                return;\n            }\n            console.log('get level err', err)\n\n            this.onHome()\n\n            if (!window.navigator.online) {\n                this._ui.showAlert('NO INTERNET CONNECTION')\n                return \n            }\n\n            this._ui.showComingSoon()\n            return\n        })\n    }\n\n    // addLevel(level: number, cb): void {\n    //     this.showLoading(true);\n    //     this._bundleInstance.loadPrefabByName(\"Level\" + (level + 1) + \"/\" + \"Level\" + (level + 1), prefab => {\n    //         this.showLoading(false);\n    //         cb(prefab);\n    //     })\n    // }\n    startGame(): void {\n        this.playSound(SOUND.CLICK, false);\n\n        this.initGame(this._selectedLevel);\n        // this.initGame(14);\n    }\n\n    selectLevel(level: number) {\n        if (this._data.unlockedLevel == TOTAL_LEVEL && level == TOTAL_LEVEL) {\n            this.showComingSoon2();\n            this.playSound(SOUND.CLICK, false);\n            return;\n        }\n        this._selectedLevel = level;\n        this.gameContainer.children.forEach(level => {\n            level.active = false;\n        })\n        if (level % 10 == 0) {\n            this._temp = this._selectedLevel;\n            this.nextIntroduce();\n            return;\n        }\n        this.initGame(level);\n        this._ui.showUIIntroduce(false);\n        this.home.active = false;\n    }\n    setLevel(start: number, current: number): void {\n        var startLevel = this.level.getChildByName(\"Start\").getChildByName(\"txtLevel\");\n        startLevel.getComponent(cc.Label).string = start.toString();\n\n        var currentLevel = this.level.getChildByName(\"Current\").getChildByName(\"txtLevel\");\n        currentLevel.getComponent(cc.Label).string = current.toString();\n    }\n    \n    playSound(id: number, loop: boolean):void {\n        Data.getData(Data.LOCAL_KEY, (err, data) => {\n            let _data = data\n            if (_data.isSound && id != 0) {\n                cc.audioEngine.play(this.sounds[id],loop, 1)\n            }\n            if (_data.isMusic && id == 0) {\n                cc.audioEngine.playMusic(this.sounds[id],loop)\n            }\n        });\n        \n    }\n\n    playStageBegin(): void {\n        \n    }\n\n    addMoney(money: number, cb: Function = null): void {\n        const direction = money < 0 ? -1 : 1\n\n        if (money == 0)\n        {\n            return;\n        }\n        else \n        {\n            Data.getData(Data.FACEBOOK_KEY, (err, data) => {\n                this._data = data\n                this._data.money += money;\n                Data.saveData(this._data, Data.FACEBOOK_KEY, cb);\n\n                tween(this._txtMoney.node).repeat(money * direction / 3,\n                    tween().call(() => {\n                        this._txtMoney.string = parseInt(this._txtMoney.string) + 3 * direction;\n                    })\n                    .delay(0.03)\n                )\n                .call(() => {\n                    this._txtMoney.string = this._data.money;\n                })\n                .start();\n            });\n            \n        }\n    }\n\n    payMoney(): void {\n        this.playSound(SOUND.CLICK, false);\n        this.addMoney(-200, (err) => {\n            this.onPlayAgain();\n        })\n    }\n\n    playClickAudio(): void {\n        this.playSound(SOUND.CLICK, false);\n    }\n    \n    //Sau khi xem xong video sẽ được x4 tiền (50 ban đầu + thêm 150)\n    showVideoX4(event: cc.Event.EventCustom): void {\n        if (!this._clickX4)\n            return;\n        this._clickX4 = false;\n        this.playSound(SOUND.CLICK, false);\n\n        GameManager.logEvent(\"x4RewardedVideo\")\n\n        this.addMoney(150);\n        this._ui.setMoney(150);\n        EffectManager.effectHideButton(event.target, 0.7);\n    }\n    //Sau khi xem quảng cáo sẽ cho chơi lại stage vừa fail\n    showVideo(event: cc.Event.EventCustom): void {\n        this.playSound(SOUND.CLICK, false);\n        this._countDown.stopCountDown();\n        \n        GameManager.logEvent(\"RevivedRewaredVideo\")\n        this.onPlayAgain();\n    }\n\n    onPlayAgain(): void {\n        this._ui.showUIEndGame(false);\n        this._ui.showUIContinue(false);\n        this._countDown.stopCountDown();\n        this._levelCurrent.script.initStage();\n    }\n\n    onTapToStart(): void {\n        this.playSound(SOUND.CLICK, false);\n        this._ui.showGuide(false);\n        if (this._data.unlockedLevel == TOTAL_LEVEL) {\n            this.showListLevel();\n            return;\n        }\n        if (this._failLevelLoad) {\n            return\n        }\n        Data.getData(Data.FACEBOOK_KEY, (err, data) => {\n            this._temp = data.unlockedLevel\n            this.nextIntroduce();\n        });\n    }\n\n    onClickSetting(): void {\n        this.playSound(SOUND.CLICK, false);\n        let setting = cc.find(\"Canvas/Setting\");\n        if (setting)\n        {\n            setting.active = true;\n        }\n        else\n        {\n            setting = cc.instantiate(this.setting);\n            cc.find(\"Canvas\").addChild(setting);\n        }\n        this._ui.showGuide(false);\n    }\n\n    showShop(show: boolean): void {\n        return\n    }\n\n    onClickReload(e) {\n    }\n\n    onShare(e) {\n        FBInstantManager.getInstance().shareGame()\n    }\n\n    onInvite(e) {\n        Data.getData(Data.FACEBOOK_KEY, (err, data) => {\n            FBInstantManager.getInstance().invitePlay({\n                level: data.unlockedLevel || 1,\n                playerId: '',\n            });\n        })\n    }\n\n    showGuide(bool: boolean): void {\n        if (this._data.unlockedLevel != 0) {\n            return;\n        }\n        \n        if (this.firstPlay) {\n            if (bool) {\n                let guide = cc.find(\"Canvas/Guide\");\n                if (guide) {\n                    guide.active = true;\n                }\n                else {\n                    guide = cc.instantiate(this.guide);\n                    guide.zIndex = cc.macro.MAX_ZINDEX;\n                    cc.find(\"Canvas\").addChild(guide);\n                }\n            }\n            else {\n                let guide = cc.find(\"Canvas/Guide\");\n                if (guide) {\n                    guide.active = false;\n                    this.firstPlay = false;\n                }\n            }\n        }\n    }\n\n    showComingSoon2(): void {\n        let cs2 = cc.find(\"Canvas/ComingSoon2\");\n        if (cs2) {\n            cs2.active = true;\n        }\n        else {\n            cs2 = cc.instantiate(this.comingSoon2);\n            cs2.zIndex = cc.macro.MAX_ZINDEX;\n            cc.find(\"Canvas\").addChild(cs2);\n        }\n    }\n}\n"]}