{"version":3,"sources":["assets/Scripts/Other/FishSwim.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const {ccclass, property} = cc._decorator;\r\n\r\nconst tween = cc.tween\r\n\r\nconst FISHS_SPEED = [250, 500, 200, 300, 200, 150]  // speed, distant per sec\r\nconst FISHS_DELAY = [3, 6, 2, 2, 4, 1]\r\n\r\n@ccclass\r\nexport default class FishSwim extends cc.Component {\r\n\r\n    @property([cc.Node])\r\n    fishs: cc.Node[] = [];\r\n\r\n    _durations = [];\r\n    _fishsConfig = [];\r\n\r\n\r\n    onLoad() {\r\n        this._fishsConfig = []\r\n        const width = this.node.width\r\n        const haftWidth = width / 2\r\n\r\n        FISHS_SPEED.forEach((sp) => {\r\n            this._durations.push(parseInt(width / sp + ''))\r\n        })\r\n\r\n        this.fishs.forEach((f, i) => {\r\n            const haftNodeWidth = f.width / 2\r\n            const posX = f.position.x\r\n            this._fishsConfig.push({\r\n                node: f,\r\n                duration: Math.abs(posX * 2) / FISHS_SPEED[i],\r\n                startX: posX,\r\n                endX: -posX,\r\n                delay: FISHS_DELAY[i],\r\n                y: f.y,\r\n                scaleX: f.scaleX,\r\n            })\r\n        })\r\n\r\n        cc.Tween.stopAllByTag(-100)\r\n    }\r\n\r\n\r\n    onEnable() {\r\n        this._fishsConfig.forEach((config, i) => {\r\n            config.node.position.x = config.startX\r\n            config.node.scaleX = config.scaleX\r\n\r\n            tween(config.node)\r\n                .tag(-100)\r\n                .delay(config.delay / 2)\r\n                .repeatForever(\r\n                    tween()\r\n                        .to(config.duration, {position: cc.v3(config.endX, config.y)})\r\n                        .delay(config.delay)\r\n                        .call(() => {\r\n                            config.node.scaleX = -config.scaleX\r\n                        })\r\n                        .to(config.duration, {position: cc.v3(config.startX, config.y)})\r\n                        .delay(config.delay)\r\n                        .call(() => {\r\n                            config.node.scaleX = config.scaleX\r\n                        })\r\n                )\r\n                .start()\r\n        })\r\n    }\r\n\r\n    onDisable() {\r\n        cc.Tween.stopAllByTag(-100)\r\n    }\r\n}\r\n"]}