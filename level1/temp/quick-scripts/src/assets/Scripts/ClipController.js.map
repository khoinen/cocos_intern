{"version":3,"sources":["assets/Scripts/ClipController.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import StageController from \"./StageController\";\nimport EffectManager from \"./EffectManager\";\n\nconst {ccclass, property} = cc._decorator;\n\nexport enum TYPE {\n    NONE,\n    INTRODUCE,\n    SUCCESS,\n    FAIL\n}\n\n@ccclass\nexport default class ClipController extends cc.Component {\n\n    @property({type: cc.Enum(TYPE)})\n    type: TYPE = TYPE.NONE;\n\n    @property({type: StageController})\n    nextStage: StageController = null;\n\n    @property\n    fade = false;\n\n    @property({type: cc.Component.EventHandler})\n    actionStart: cc.Component.EventHandler[] = [];\n\n    private _ = null;\n    onLoad(): void {\n        this._ = this;\n    }\n\n    onEnable(): void {\n        // this.node.on(\"finish_stage\", this.)\n        this.node.on(\"complete_introduce\", this.onCompleteIntroduce, this);\n    }\n    \n    onDisable(): void {\n        this.node.on(\"complete_introduce\", this.onCompleteIntroduce, this);\n    }\n\n    onCompleteIntroduce(event: cc.Event.EventCustom): void {\n        event.stopPropagation();\n        var optionContainer = cc.find(\"Canvas/OptionContainer\");\n        EffectManager.effectScaleOption(optionContainer, 0.7);\n    }\n\n    startClip(_this): void {\n        var component = \"\";\n        var handler = \"\";\n        for (var element of _this.actionStart)\n        {\n            component = element._componentName;\n            handler = element.handler;\n            var func = element.target.getComponent(component)[handler];\n            func(element.target.getComponent(component));\n        }\n    }\n\n    onFinishClip(_this): void {\n        console.log(\"%c\" + _this.type, \"color: violet\");\n        switch (_this.type)\n        {\n            case TYPE.INTRODUCE:\n                var clip = _this.node.parent;\n                var stageController = clip.getComponent(\"StageController\");\n                EffectManager.effectScaleOption(stageController.optionContainer, 0.5);\n                break;\n            default:\n                let stage = _this.node.parent.getComponent(\"StageController\");\n                stage.onResult(_this.type);\n                break;\n        }\n    }  \n}\n"]}