{"version":3,"sources":["assets/Scripts/StageController.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import EffectManager from \"./EffectManager\";\nimport ClipController from \"./ClipController\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class StageController extends cc.Component {\n\n    @property({type: cc.Node})\n    target: cc.Node[]= [];\n\n    @property(cc.SpriteFrame)\n    iconOption: cc.SpriteFrame[] = [];\n\n    @property(cc.Node)\n    optionContainer: cc.Node = null;\n\n    @property({type: cc.Node})\n    stageStart: cc.Node = null;\n\n    @property(cc.Node)\n    topContainer: cc.Node = null;\n\n    private _ = null;\n    private isClick = false;\n\n    onLoad(): void {\n        this._ = this;\n        this.optionContainer.scale = 0;\n    }\n\n    onEnable(): void {\n        var option = this.optionContainer.getComponent(\"OptionController\");\n        option.setImageOption(this.iconOption);\n        for (var i = 0; i < option.node.children.length; ++i)\n        {\n            option.setOption(i, this.node, \"StageController\", \"runClip\");\n            this.isClick = true;\n        }\n        this.setTopContainer();\n    }\n\n    runStage(): void {\n        var clipController = this.stageStart.getComponent(\"ClipController\");\n        clipController.startClip(clipController);\n    }\n\n    showOptionContainer(): void {\n        EffectManager.effectScaleOption(this.optionContainer, 0.5);\n    }\n\n    runClip(event): void {\n        if (!this.isClick)\n        {\n            cc.error(\"Khong duoc click option lien tuc\");\n            return;\n        }\n        this.isClick = false;\n        let _node = event.target;\n        _node.getChildByName(\"selected\").active = true;\n        switch(_node.name)\n        {\n            case \"option1\":\n                var clipController = this.target[0].getComponent(\"ClipController\");\n                clipController.startClip(clipController);\n                break;\n            case \"option2\":\n                var clipController = this.target[1].getComponent(\"ClipController\");\n                clipController.startClip(clipController);\n                break;\n            case \"option3\":\n                var clipController = this.target[2].getComponent(\"ClipController\");\n                clipController.startClip(clipController);\n                break;\n        }\n    }\n\n    setTopContainer(): void {\n        var index = parseInt(this.node.name.split(\"Stage\")[1]) - 1;;\n        for (let i = 0; i < this.topContainer.children.length; ++i)\n        {\n            let children = this.topContainer.children[i].getChildByName((index - 1).toString());\n            if (children)\n            {\n                children.getChildByName(\"TrueAnswer\").active = true;\n            }\n        }\n    }\n    onResult(type): void {\n        cc.Tween.stopAll();\n    }\n}\n"]}