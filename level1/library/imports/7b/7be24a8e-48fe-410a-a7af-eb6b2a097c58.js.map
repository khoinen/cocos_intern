{"version":3,"sources":["assets/Scripts/CountDown5s.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,+CAA0C;AAGpC,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAE1C,IAAM,IAAI,GAAG,CAAC,CAAC;AAEf;IAAyC,+BAAY;IAArD;QAAA,qEA4CC;QA1CW,eAAS,GAAG,IAAI,CAAC;;IA0C7B,CAAC;IAzCG,8BAAQ,GAAR;QACI,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;IAC5B,CAAC;IAED,+BAAS,GAAT;QACI,IAAI,CAAC,aAAa,EAAE,CAAC;IACzB,CAAC;IAED,kCAAY,GAAZ,UAAa,MAAc;QACvB,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;QACvB,IAAI,GAAG,GAAG,KAAK,GAAG,MAAM,GAAG,IAAI,CAAC;QAChC,IAAI,IAAI,GAAG,MAAM,CAAC;QAClB,IAAI,CAAC,SAAS,GAAG;YACb,IAAI,UAAU,GAAG,IAAI,CAAC,GAAG,EAAE,GAAG,KAAK,CAAC;YACpC,IAAI,OAAO,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;YAEzD,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,SAAS,GAAG,OAAO,CAAC;YACtD,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,UAAU,GAAG,IAAI,CAAC,CAAC;YAErG,IAAI,OAAO,GAAG,CAAC,KAAK,EACpB;gBACI,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,SAAS,GAAG,CAAC,CAAC;gBAEhD,IAAI,WAAW,GAAG,EAAE,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC,YAAY,CAAC,aAAa,CAAC,CAAC;gBAC5E,IAAI,YAAY,GAAG,WAAW,CAAC,aAAa,CAAC;gBAE7C,WAAW,CAAC,GAAG,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;gBACtC,IAAI,YAAY,EAChB;oBACI,sBAAY,CAAC,yBAAyB,CAAC,YAAY,CAAC,CAAC;iBACxD;gBACD,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;aACnC;QACL,CAAC,CAAA;QACD,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;IACxC,CAAC;IAED,mCAAa,GAAb;QACI,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAChC,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAE,cAAc,CAAC,CAAC;IACpD,CAAC;IA3CgB,WAAW;QAD/B,OAAO;OACa,WAAW,CA4C/B;IAAD,kBAAC;CA5CD,AA4CC,CA5CwC,EAAE,CAAC,SAAS,GA4CpD;kBA5CoB,WAAW","file":"","sourceRoot":"/","sourcesContent":["import EventManager from \"./EventManager\";\n\n\nconst {ccclass, property} = cc._decorator;\n\nconst TIME = 5;\n@ccclass\nexport default class CountDown5s extends cc.Component {\n\n    private countDown = null;\n    onEnable(): void {\n        this.runCountDown(TIME);\n    }\n\n    onDisable(): void {\n        this.stopCountDown();\n    }\n\n    runCountDown(second: number): void {\n        var start = Date.now();\n        var end = start + second * 1000;\n        var temp = second;\n        this.countDown = function (): void {\n            var milisecond = Date.now() - start;\n            var percent = 1 - (1 / ((second * 1000) / (milisecond)));\n            \n            this.node.getComponent(cc.Sprite).fillRange = percent;\n            this.node.getChildByName(\"Second\").getComponent(cc.Label).string = Math.floor(6 - milisecond / 1000);\n\n            if (percent < -0.009)\n            {\n                this.node.getComponent(cc.Sprite).fillRange = 0;\n\n                var gameManager = cc.find(\"Canvas/GameManager\").getComponent(\"GameManager\");\n                var currentScene = gameManager._currentScene;\n                \n                gameManager._ui.showUIContinue(false);\n                if (currentScene)\n                {\n                    EventManager.sendRequestPlayStageBegin(currentScene);\n                }\n                this.unschedule(this.countDown);\n            }\n        }\n        this.schedule(this.countDown, 0.01);     \n    }\n\n    stopCountDown(): void {\n        this.unschedule(this.countDown);\n        console.log(\"%cStop CountDown\", \"color:orange\");\n    }\n}\n"]}